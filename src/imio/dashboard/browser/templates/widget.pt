<div class="faceted-widget faceted-tagscloud-widget faceted-tagscloud-collection-widget"
     tal:define="wid python:view.data.getId();
                 base_url string:${view/base_url};
                 grouped_vocabulary view/grouped_vocabulary;"
     i18n:domain="eea">
  <ul>
    <li tal:condition="python: not view.data.hidealloption or not grouped_vocabulary"
        tal:attributes="
        value string:'';
        data-kept-criteria python:view.kept_criteria_as_json('all');
        title string:All;
        id string:${wid}all;"
        class="no-category-tag"
        i18n:attributes="title">
        <a href="#"
           tal:attributes="href string:${base_url}&${wid}=all;"
           tal:content="string:All" i18n:translate="">All</a>
    </li>
    <tal:categories repeat="grouped_element python: grouped_vocabulary.items()">
      <tal:category define="category python:grouped_element[0];
                            elements python:grouped_element[1];">
        <div class="title" tal:content="python: category[1]" tal:omit-tag="python: not category[1]">Category title</div>
        <tal:items repeat="term elements">
          <li tal:define="
            term_id python:term[0];
            term_label python:term[1];
            term_label python:view.translate(term_label);
            wbr_term_label python:view.word_break(term_label);"
            tal:attributes="
            value python:term_id;
            title term_label;
            id string:${wid}${term_id};
            class python: not category[0] and 'no-category-tag' or '';">
               <a href="#"
                  tal:attributes="href string:${base_url}&${wid}=${term_id};"
                  tal:content="wbr_term_label" />
          </li>
        </tal:items>
      </tal:category>
    </tal:categories>
  </ul>
</div>
